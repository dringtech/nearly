{
  "version": 3,
  "sources": ["../src/lib.ts", "../src/utils.ts", "../src/ratio.ts"],
  "sourcesContent": ["export { ratioed, type RatioedOptions, type Ratio } from './ratio.ts';\n\nconst EXACT = 'exacly';\nconst LESS_THAN = 'less than';\nconst MORE_THAN = 'more than';\nconst ABOUT = 'about';\n\nexport const readableDirection = (difference: number) => {\n  if (difference === 0) return EXACT;\n\tif (difference < -0.01) return LESS_THAN;\n\tif (difference > 0.01) return MORE_THAN;\n\treturn ABOUT;\n}", "export function clamp(min: number, number: number, max: number) {\n\treturn Math.max(min, Math.min(number, max));\n}\n", "import { clamp } from './utils.ts';\n\nexport type Ratio = { numerator: number, denominator: number, difference: number };\nexport type RatioedOptions = {\n  maxDenominator?: number;\n}\n\nconst ratioSort = (a:Ratio, b: Ratio) => {\n  const difference = Math.abs(a.difference) - Math.abs(b.difference);\n  const denominator = a.denominator - b.denominator;\n  if (difference === 0) return denominator;\n  return difference;\n}\n\nexport function ratioed(ratio: number, options: RatioedOptions = {}) {\n  const possibleRatios: Ratio[] = [];\n  const maxDenominator = options.maxDenominator || Infinity;\n  // const tolerance = 0.1 / maxDenominator;\n\n  const baseDenominators = [...Array(9).keys()].map(x => x + 2);\n  const denominators = [\n    ...baseDenominators,\n    ...baseDenominators.map(x => x * 10),\n  ].filter(x => x <= maxDenominator);\n  console.log(denominators);\n\n  for (const denominator of denominators) {\n    const numerator = clamp(1, Math.round(ratio * denominator), denominator - 1);\n    const difference = ratio - numerator / denominator;\n    possibleRatios.push({\n      numerator,\n      denominator,\n      difference,\n    });\n    // if (Math.abs(difference) < tolerance) break;\n  }\n\n  // Return the ratio with the lowest difference\n  return possibleRatios\n    .sort(ratioSort)\n    .shift() as Ratio;\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,WAAS,MAAM,KAAa,QAAgB,KAAa;AAC/D,WAAO,KAAK,IAAI,KAAK,KAAK,IAAI,QAAQ,GAAG,CAAC;AAAA,EAC3C;;;ACKA,MAAM,YAAY,CAAC,GAAS,MAAa;AACvC,UAAM,aAAa,KAAK,IAAI,EAAE,UAAU,IAAI,KAAK,IAAI,EAAE,UAAU;AACjE,UAAM,cAAc,EAAE,cAAc,EAAE;AACtC,QAAI,eAAe;AAAG,aAAO;AAC7B,WAAO;AAAA,EACT;AAEO,WAAS,QAAQ,OAAe,UAA0B,CAAC,GAAG;AACnE,UAAM,iBAA0B,CAAC;AACjC,UAAM,iBAAiB,QAAQ,kBAAkB;AAGjD,UAAM,mBAAmB,CAAC,GAAG,MAAM,CAAC,EAAE,KAAK,CAAC,EAAE,IAAI,OAAK,IAAI,CAAC;AAC5D,UAAM,eAAe;AAAA,MACnB,GAAG;AAAA,MACH,GAAG,iBAAiB,IAAI,OAAK,IAAI,EAAE;AAAA,IACrC,EAAE,OAAO,OAAK,KAAK,cAAc;AACjC,YAAQ,IAAI,YAAY;AAExB,eAAW,eAAe,cAAc;AACtC,YAAM,YAAY,MAAM,GAAG,KAAK,MAAM,QAAQ,WAAW,GAAG,cAAc,CAAC;AAC3E,YAAM,aAAa,QAAQ,YAAY;AACvC,qBAAe,KAAK;AAAA,QAClB;AAAA,QACA;AAAA,QACA;AAAA,MACF,CAAC;AAAA,IAEH;AAGA,WAAO,eACJ,KAAK,SAAS,EACd,MAAM;AAAA,EACX;;;AFvCA,MAAM,QAAQ;AACd,MAAM,YAAY;AAClB,MAAM,YAAY;AAClB,MAAM,QAAQ;AAEP,MAAM,oBAAoB,CAAC,eAAuB;AACvD,QAAI,eAAe;AAAG,aAAO;AAC9B,QAAI,aAAa;AAAO,aAAO;AAC/B,QAAI,aAAa;AAAM,aAAO;AAC9B,WAAO;AAAA,EACR;",
  "names": []
}
